<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ws.interlanguage.InterlanguageLinks module &#8212; wiki-scripts 1.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/wiki-scripts.ico"/>
    <link rel="top" title="wiki-scripts 1.1 documentation" href="../index.html" />
    <link rel="up" title="ws.interlanguage package" href="ws.interlanguage.html" />
    <link rel="next" title="ws.parser_helpers package" href="ws.parser_helpers.html" />
    <link rel="prev" title="ws.interlanguage.CategoryGraph module" href="ws.interlanguage.CategoryGraph.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-ws.interlanguage.InterlanguageLinks">
<span id="ws-interlanguage-interlanguagelinks-module"></span><h1>ws.interlanguage.InterlanguageLinks module<a class="headerlink" href="#module-ws.interlanguage.InterlanguageLinks" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks">
<em class="property">class </em><code class="descclassname">ws.interlanguage.InterlanguageLinks.</code><code class="descname">InterlanguageLinks</code><span class="sig-paren">(</span><em>api</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Update interlanguage links on ArchWiki based on the following algorithm:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Fetch list of all pages with prop=langlinks to be able to build a
langlink graph (separate from the content dict for quick searching).</li>
<li>Group pages into families based on their title, which is the primary key
to denote a family. The grouping is case-insensitive and includes even
pages without any interlanguage links. The family name corresponds to
the only English page in the family (or when not present, to the English
base of the localized title).</li>
<li>For every page on the wiki:<ol class="loweralpha">
<li>Determine the family of the page.</li>
<li>Assemble a set of pages in the family. This is done by first
including the pages in the group from step 2., then pulling any
internal langlinks from the pages in the set (in unspecified order),
and finally based on the presence of an English page in the family:<ul>
<li>If there is an English page directly in the group from step 2. or
if other pages link to an English page whose group can be merged
with the current group without causing a conflict, its external
langlinks are pulled in. As a result, external langlinks removed
from the English page are assumed to be invalid and removed also
from other pages in the family. For consistency, also internal
langlinks are pulled from the English page.</li>
<li>If the pulling from an English page was not done, external
langlinks are pulled from the other pages (in unspecified order),
which completes the previous inclusion of internal langlinks.</li>
</ul>
</li>
<li>Check if it is necessary to update the page by comparing the new set
of langlinks for a page (i.e. <code class="docutils literal"><span class="pre">family.titles</span> <span class="pre">-</span> <span class="pre">{title}</span></code>) with the
old set obtained from the wiki&#8217;s API. If an update is needed:<ul>
<li>Fetch content of the page.</li>
<li>Update the langlinks of the page.</li>
<li>If there is a difference, save the page.</li>
</ul>
</li>
</ol>
</li>
</ol>
</div></blockquote>
<dl class="attribute">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.content_namespaces">
<code class="descname">content_namespaces</code><em class="property"> = [0, 4, 10, 12, 14]</em><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.content_namespaces" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.edit_summary">
<code class="descname">edit_summary</code><em class="property"> = 'update interlanguage links'</em><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.edit_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks._get_allpages">
<code class="descname">_get_allpages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks._get_allpages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks._group_into_families">
<em class="property">static </em><code class="descname">_group_into_families</code><span class="sig-paren">(</span><em>pages</em>, <em>case_sensitive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks._group_into_families" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes list of pages and groups them based on their title. Returns a
mapping of <cite>family_key</cite> to <cite>family_pages</cite>, where <cite>family_key</cite> is the
base title without the language suffix (e.g. &#8220;Some title&#8221; for
&#8220;Some title (Česky)&#8221;) and <cite>family_pages</cite> is a list of pages belonging
to the family (have the same <cite>family_key</cite>).</p>
</dd></dl>

<dl class="attribute">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.allpages">
<code class="descname">allpages</code><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.allpages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.wrapped_titles">
<code class="descname">wrapped_titles</code><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.wrapped_titles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks._is_valid_interlanguage">
<em class="property">static </em><code class="descname">_is_valid_interlanguage</code><span class="sig-paren">(</span><em>full_title</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks._is_valid_interlanguage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks._is_valid_internal">
<code class="descname">_is_valid_internal</code><span class="sig-paren">(</span><em>tag</em>, <em>title</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks._is_valid_internal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks._title_from_langlink">
<code class="descname">_title_from_langlink</code><span class="sig-paren">(</span><em>langlink</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks._title_from_langlink" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.titles_in_family">
<code class="descname">titles_in_family</code><span class="sig-paren">(</span><em>master_title</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.titles_in_family" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the titles in the family corresponding to <code class="docutils literal"><span class="pre">master_title</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>master_title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; a page title (does not have to be English page)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a <code class="docutils literal"><span class="pre">(titles,</span> <span class="pre">tags)</span></code> tuple, where <code class="docutils literal"><span class="pre">titles</span></code> is the set of titles
in the family (including <code class="docutils literal"><span class="pre">title</span></code>) and <code class="docutils literal"><span class="pre">tags</span></code> is the set of
corresponding language tags</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.get_langlinks">
<code class="descname">get_langlinks</code><span class="sig-paren">(</span><em>full_title</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.get_langlinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses <code class="xref py py-meth docutils literal"><span class="pre">self.titles_in_family()</span></code> to get the titles of all pages in
the family, removes the link to the passed title and sorts the list by
the language subtag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">title)</span></code> tuples</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_page">
<em class="property">static </em><code class="descname">update_page</code><span class="sig-paren">(</span><em>title</em>, <em>text</em>, <em>langlinks</em>, <em>weak_update=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_page" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; title of the page</li>
<li><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; wikitext of the page</li>
<li><strong>langlinks</strong> &#8211; a sorted list of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">title)</span></code> tuples as obtained
from <code class="xref py py-meth docutils literal"><span class="pre">self._get_langlinks()</span></code></li>
<li><strong>weak_update</strong> &#8211; When <code class="docutils literal"><span class="pre">True</span></code>, the langlinks present on the page are mixed with those
suggested by <code class="docutils literal"><span class="pre">family_titles</span></code>. This is necessary only when there are
multiple &#8220;intersecting&#8221; families, in which case the intersection should
be preserved and solved manually. This is reported in _merge_families.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">updated wikicode</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks._needs_update">
<em class="property">static </em><code class="descname">_needs_update</code><span class="sig-paren">(</span><em>page</em>, <em>langlinks_new</em><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks._needs_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_allpages">
<code class="descname">update_allpages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.update_allpages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ws.interlanguage.InterlanguageLinks.InterlanguageLinks.find_orphans">
<code class="descname">find_orphans</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ws.interlanguage.InterlanguageLinks.InterlanguageLinks.find_orphans" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of pages that are alone in their families.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/wiki-scripts.png" alt="Logo"/>
            </a></p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../modules.html">API reference</a><ul>
  <li><a href="ws.html">ws package</a><ul>
  <li><a href="ws.interlanguage.html">ws.interlanguage package</a><ul>
      <li>Previous: <a href="ws.interlanguage.CategoryGraph.html" title="previous chapter">ws.interlanguage.CategoryGraph module</a></li>
      <li>Next: <a href="ws.parser_helpers.html" title="next chapter">ws.parser_helpers package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/ws/ws.interlanguage.InterlanguageLinks.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2016, Jakub Klinkovský.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../_sources/ws/ws.interlanguage.InterlanguageLinks.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/lahwaacz/wiki-scripts" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>